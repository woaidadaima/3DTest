<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Three.js Sprite 涟漪动画</title>
    <style>
        body {
            margin: 0;
        }
    </style>
</head>

<body>
    <!-- 引入Three.js核心库 -->
    <script type="importmap">
    {
      "imports": {
        "three": "./three/build/three.module.js",
        "three/addons/": "./three/examples/jsm/",
        "@tweenjs/tween.js": "./tween.js-main/dist/tween.esm.js"
      }
    }
  </script>
    <script type="module">
        import * as THREE from "three";

        // 初始化场景
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        camera.position.z = 5;

        // 方法1：单 Sprite 涟漪
        const texture = new THREE.TextureLoader().load("https://threejs.org/examples/textures/sprites/disc.png");
        const material = new THREE.SpriteMaterial({ map: texture, transparent: true, color: 0x00aaff });
        const sprite = new THREE.Sprite(material);
        sprite.rotation.z = Math.PI / 4;
        scene.add(sprite);

        // 方法2：多 Sprite 涟漪
        const ripples = [];
        for (let i = 0; i < 3; i++) {
            const material = new THREE.SpriteMaterial({
                map: texture,
                transparent: true,
                opacity: 0,
                color: 0x00aaff
            });
            const sprite = new THREE.Sprite(material);
            scene.add(sprite);
            ripples.push({ sprite, phase: (i / 3) * Math.PI * 2 });
        }

        // 动画循环
        function animate() {
            requestAnimationFrame(animate);

            // 方法1动画
            const time = Date.now() * 0.001;
            sprite.scale.setScalar(1 + Math.sin(time * 2) * 0.5);
            sprite.material.opacity = 0.8 - Math.sin(time * 2) * 0.4;

            // 方法2动画
            // ripples.forEach(ripple => {
            //     const progress = (Math.sin(time * 2 + ripple.phase) + 1) / 2;
            //     ripple.sprite.scale.setScalar(1 + progress * 2);
            //     ripple.sprite.material.opacity = 1 - progress;
            // });

            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>

</html>